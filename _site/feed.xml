<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>John Wong&#39;s Blog</title>
    <description></description>
    <link>/</link>
    <atom:link href="/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Tue, 03 Feb 2015 23:59:44 +0800</pubDate>
    <lastBuildDate>Tue, 03 Feb 2015 23:59:44 +0800</lastBuildDate>
    <generator>Jekyll v2.4.0</generator>
    
      <item>
        <title>用FauxPas找到潜在Bug</title>
        <description>&lt;p&gt;Faux Pas是一个Xcode辅助工具，检查iOS或者Mac项目，找到潜在bug，以及可维护性和风格问题。提供了92条规则可供挑选，支持GUI和CLI。目前发布了beta版，提供30天试用。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://fauxpasapp.com/&quot;&gt;Faux Pas Homepage&lt;/a&gt;
&lt;a href=&quot;http://fauxpasapp.com/try/&quot;&gt;Faux Pas Donwload&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;亲身试用后，发现了项目中的多处问题。一些需要手动查找的问题，在这里都得到了检查。同时也提供了代码风格的建议和一些细节的优化建议。&lt;/p&gt;

&lt;h2&gt;功能&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;控制潜在bug&lt;/li&gt;
&lt;li&gt;查找资源文件错误&lt;/li&gt;
&lt;li&gt;查找本地化错误&lt;/li&gt;
&lt;li&gt;发现版本控制错误&lt;/li&gt;
&lt;li&gt;学习和实施最佳实践&lt;/li&gt;
&lt;li&gt;实施代码风格&lt;/li&gt;
&lt;li&gt;代码审查清单&lt;/li&gt;
&lt;li&gt;92条规则可供挑选&lt;/li&gt;
&lt;li&gt;提供GUI或者CLI&lt;/li&gt;
&lt;li&gt;在Xcode构建时运行&lt;/li&gt;
&lt;li&gt;连接外部工具，支持导出结果和自定义脚本&lt;/li&gt;
&lt;li&gt;按标签选取规则 保存在JSON配置文件中&lt;/li&gt;
&lt;li&gt;更改打开代码的编辑器&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;使用方法&lt;/h2&gt;

&lt;h3&gt;GUI&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;打开FauxPas&lt;/li&gt;
&lt;li&gt;选择或者排除一些规则&lt;/li&gt;
&lt;li&gt;Start Checking&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;CLI&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;打开FauxPas&lt;/li&gt;
&lt;li&gt;菜单栏Faux Pas &amp;gt; Install CLI Tools…&lt;/li&gt;
&lt;li&gt;shell&amp;gt; fauxpas -t iCoupon check iCoupon.xcodeproj/&lt;/li&gt;
&lt;li&gt;可以输出不同格式、挑选检查规则等，参见帮助，例如查找重复资源&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt; fauxpas --onlyRules UnusedResource -o json check MyProject.xcodeproj
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Xcode build时检查&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;确保CLI安装&lt;/li&gt;
&lt;li&gt;在Xcode项目的target中新增&amp;quot;Run Script&amp;quot; build phase&lt;/li&gt;
&lt;li&gt;添加如下脚本，build时会执行FauxPas检查&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[[ ${FAUXPAS_SKIP} == 1 ]] &amp;amp;&amp;amp; exit 0

 FAUXPAS_PATH=&amp;quot;/usr/local/bin/fauxpas&amp;quot;
 if [[ -f &amp;quot;${FAUXPAS_PATH}&amp;quot; ]]; then
   &amp;quot;${FAUXPAS_PATH}&amp;quot; check-xcode
 else
   echo &amp;quot;warning: Faux Pas was not found at &amp;#39;${FAUXPAS_PATH}&amp;#39;&amp;quot;
 fi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;建议不使用这种方式，会额外增加build时间。&lt;/p&gt;

&lt;h3&gt;Xcode中手动执行&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;确保CLI安装&lt;/li&gt;
&lt;li&gt;项目中创建Aggregate类型target&lt;/li&gt;
&lt;li&gt;在该target下新增&amp;quot;Run Script&amp;quot; build phase&lt;/li&gt;
&lt;li&gt;添加如下脚本，运行该target时会执行FauxPas检查&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt; /usr/local/bin/fauxpas -o xcode check &amp;quot;PROJECT_NAME.xcodeproj&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;导出结果&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;GUI中点击Export Diagnostics，选择格式&lt;/li&gt;
&lt;li&gt;CLI下-o参数，可选human、json、plist、xcode&lt;/li&gt;
&lt;li&gt;导出结果可以用其他工具处理&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;实战&lt;/h2&gt;

&lt;p&gt;使用GUI扫描了项目，发现了许多不少有价值的问题，值得我们学习。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;编译参数的有益建议，比如-DNDEBUG&lt;/li&gt;
&lt;li&gt;多处图片缺少和图片重复&lt;/li&gt;
&lt;li&gt;非retian与retina图尺寸不是2倍&lt;/li&gt;
&lt;li&gt;没有前缀或者前缀与SDK冲突，建议至少三字符长度&lt;/li&gt;
&lt;li&gt;Retain Delegate&lt;/li&gt;
&lt;li&gt;重载或者调用一些限制的系统方法&lt;/li&gt;
&lt;li&gt;缺少获取授权的描述&lt;/li&gt;
&lt;li&gt;Category方法冲突&lt;/li&gt;
&lt;li&gt;未使用的Error值，建议不关心Error时参数传入NULL&lt;/li&gt;
&lt;li&gt;设置delegate或者datasource为self时需要在dealloc中置为空&lt;/li&gt;
&lt;li&gt;对指针和0做比较&lt;/li&gt;
&lt;li&gt;obj ? obj : other obj将会评估2次。而obj ?: other会评估一次&lt;/li&gt;
&lt;li&gt;界面字符串缺少本地化，我们的项目实际不需要&lt;/li&gt;
&lt;li&gt;修改传入参数的值&lt;/li&gt;
&lt;li&gt;model类包含的对象的@property建议用copy，防止非setter的修改&lt;/li&gt;
&lt;li&gt;pch中引用过的头文件再次引用多余&lt;/li&gt;
&lt;li&gt;VCS建议，例如建议Xcode workspace data不忽略&lt;/li&gt;
&lt;li&gt;在init or dealloc不要使用setter。&lt;/li&gt;
&lt;li&gt;不和习惯的getter。使用something而非getSomething&lt;/li&gt;
&lt;li&gt;旧语法，例如+[NSNumber numberWithFloat:], -[NSDictionary objectForKey:]。建议转换为现代语法Edit → Refactor → Convert To Modern Objective-C Syntax&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Fri, 29 Aug 2014 00:00:00 +0800</pubDate>
        <link>/mobile/2014/08/29/using-fauxpas.html</link>
        <guid isPermaLink="true">/mobile/2014/08/29/using-fauxpas.html</guid>
        
        
        <category>mobile</category>
        
      </item>
    
      <item>
        <title>苹果的一些坑</title>
        <description>&lt;p&gt;嗯嗯，最近踩坑不少，总结一下：&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;OSX中文系统网络代理，如果设置了排除的网址，保存后会被系统将分隔符逗号改为顿号导致失效。所以我一直在用英文版。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;iOS地图SDK中，MKAnnotationView的centerOffset属性设置无效，是一个bug。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;iOS8槽点更多。模拟器点击关于本机之后有可能卡死。5s进入设置页点进比较深的页面，然后快速双击后退。页面内容后退两次，但是导航栏只后退了一次。AppStore闪退过。AppStore点击搜索后自动变成取消搜索的状态。wifi设置bug很多，经常变成怪异的样子。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Safari中有的图片会缺少一部分，试过Photoshop导出图片的各种选项后发现，导出时勾选连续、使用嵌入颜色配置才会显示正确。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Wed, 04 Jun 2014 00:00:00 +0800</pubDate>
        <link>/past/2014/06/04/bugs-by-apple.html</link>
        <guid isPermaLink="true">/past/2014/06/04/bugs-by-apple.html</guid>
        
        
        <category>past</category>
        
      </item>
    
      <item>
        <title>人生第一份工作</title>
        <description>&lt;p&gt;上周五入职了，开始人生的第一份工作。时隔五年后再次来到杭州，心情不一样了。本科怕工作了没时间玩，去北京晚了好多天好多地方。怕没时间去南方这么远，把江沪浙一代逛遍了。万万没想到读研去北京了，工作去杭州了。五年前总想着玩，游遍全国走向世界，现在则时刻记着肩上的担子。&lt;/p&gt;

&lt;p&gt;无聊消遣做做iOS玩，没想到成为以后的技术方向。玩跟工作毕竟不一样，要学的东西很多，我必须要加倍努力。师兄人很好，也挺关心我，团队氛围也很好。能坑自己的，恐怕只有自己。接下来就看自己能不能成为自己想成为的样子。&lt;/p&gt;
</description>
        <pubDate>Tue, 22 Apr 2014 00:00:00 +0800</pubDate>
        <link>/past/2014/04/22/first-job-in-my-life.html</link>
        <guid isPermaLink="true">/past/2014/04/22/first-job-in-my-life.html</guid>
        
        
        <category>past</category>
        
      </item>
    
      <item>
        <title>扒一扒北邮的安全问题[5]-教务账号外泄到鲜次元</title>
        <description>&lt;h4&gt;漏洞类型：&lt;/h4&gt;

&lt;p&gt;SQL注入&lt;/p&gt;

&lt;h4&gt;相关网站&lt;/h4&gt;

&lt;p&gt;鲜次元&lt;/p&gt;

&lt;h4&gt;问题描述&lt;/h4&gt;

&lt;p&gt;鲜次元网站存在sql诸如漏洞，其数据库存储这部分同学的教务账号&lt;/p&gt;

&lt;h4&gt;漏洞详情&lt;/h4&gt;

&lt;p&gt;之前就发现鲜次元网站存在sql注入漏洞，搞到了mysql的root账户加密后的密码，一直无法解密。今天闲来无事进一步测试，发现其中有一个数据库名为a1015151118，里面的user表存储这用户信息，但是存在password、xuehao、byrpassword和jwcpassword。惊呆了，莫非包含了学号、北邮人密码和教务处密码。用户的北邮人账号不清楚，所以北邮人密码也用不上，就试试教务处网站。 
password字段是加密的但是有部分可以简单解出来。学号已经有了，jwcpassword字段好多是空的，就用password字段解密后作为教务处密码。试了几个账号，有一个成功了，而且还是朝鲜族美女。后面又成功登录了几个账号，懒得继续试下去了。 &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-04-06-security-in-bupt-05-01.png&quot; alt=&quot;2014-04-06-security-in-bupt-05-01.png&quot;&gt;&lt;/p&gt;

&lt;p&gt;PS. 后来了解到鲜次元为一个校内活动提供数据库支持但是活动结束后没及时清理数据才会有学生信息。没想到现在鲜次元独立网站已经关掉，切换到新浪博客上也许久没更新了，应该是阵亡了，挺可惜的。&lt;/p&gt;

&lt;h4&gt;原帖&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;http://bbs.byr.cn/#!article/WWWTechnology/24483&quot;&gt;http://bbs.byr.cn/#!article/WWWTechnology/24483&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Sun, 06 Apr 2014 00:00:00 +0800</pubDate>
        <link>/security/2014/04/06/security-in-bupt-05.html</link>
        <guid isPermaLink="true">/security/2014/04/06/security-in-bupt-05.html</guid>
        
        
        <category>security</category>
        
      </item>
    
      <item>
        <title>扒一扒北邮的安全问题[4]-一大波访问控制问题</title>
        <description>&lt;h4&gt;漏洞类型：&lt;/h4&gt;

&lt;p&gt;弱口令/无访问控制/代码备份&lt;/p&gt;

&lt;h4&gt;相关网站&lt;/h4&gt;

&lt;p&gt;内网多个ip&lt;/p&gt;

&lt;h4&gt;问题描述&lt;/h4&gt;

&lt;p&gt;文件、数据库、代码、phpMyAdmin等无法访问控制或者弱口令&lt;/p&gt;

&lt;h4&gt;漏洞详情&lt;/h4&gt;

&lt;p&gt;一票Web容器没做访问控制，同时给了列目录权限。这样就等于自己的各种资源分享给了所有人啊，这应该不是初衷吧。 &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-04-02-security-in-bupt-04-01.jpg&quot; alt=&quot;/images/2014-04-02-security-in-bupt-04-01.jpg&quot;&gt;&lt;/p&gt;

&lt;p&gt;然后还有一票phpMyAdmin没有访问控制，或者弱口令。据说拿到MySql的远程登录权限甚至能上传程序控制整个主机。 &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-04-02-security-in-bupt-04-02.jpg&quot; alt=&quot;/images/2014-04-02-security-in-bupt-04-02.jpg&quot;&gt;&lt;/p&gt;

&lt;p&gt;然后是使用默认密码的版本控制程序、惠普打印机、戴尔服务器、中兴4G LTE CPE设备、TP-LINK路由器。这个打印机还有Telnet功能，能远程打印。至于有没有打印出来不知道了。 &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-04-02-security-in-bupt-04-03.png&quot; alt=&quot;/images/2014-04-02-security-in-bupt-04-03.png&quot;&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-04-02-security-in-bupt-04-04.png&quot; alt=&quot;/images/2014-04-02-security-in-bupt-04-04.png&quot;&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-04-02-security-in-bupt-04-05.png&quot; alt=&quot;/images/2014-04-02-security-in-bupt-04-05.png&quot;&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-04-02-security-in-bupt-04-06.png&quot; alt=&quot;/images/2014-04-02-security-in-bupt-04-06.png&quot;&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-04-02-security-in-bupt-04-07.png&quot; alt=&quot;/images/2014-04-02-security-in-bupt-04-07.png&quot;&gt;&lt;/p&gt;

&lt;p&gt;最后是一个智慧油田系统。数据库没有使用弱口令，但是把源代码打包放到Web容器里，很容易从中找到数据库配置。管理员密码还是明文存储的。。。 &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-04-02-security-in-bupt-04-08.png&quot; alt=&quot;/images/2014-04-02-security-in-bupt-04-08.png&quot;&gt;&lt;/p&gt;

&lt;p&gt;总结一下：使用web容器最好不要给列目录的权限；不使用弱口令和默认密码；代码不要打包后放到容器中。 
PS. 我尽量隐藏IP等细节了。如果不小心放出了请即使私信我。 &lt;/p&gt;

&lt;h4&gt;原帖&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;http://bbs.byr.cn/#!article/WWWTechnology/24398&quot;&gt;http://bbs.byr.cn/#!article/WWWTechnology/24398&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 02 Apr 2014 00:00:00 +0800</pubDate>
        <link>/security/2014/04/02/security-in-bupt-04.html</link>
        <guid isPermaLink="true">/security/2014/04/02/security-in-bupt-04.html</guid>
        
        
        <category>security</category>
        
      </item>
    
      <item>
        <title>扒一扒北邮的安全问题[3]-摄像头这么多</title>
        <description>&lt;h4&gt;漏洞类型：&lt;/h4&gt;

&lt;p&gt;弱口令/默认密码&lt;/p&gt;

&lt;h4&gt;相关网站&lt;/h4&gt;

&lt;p&gt;校园内网某实验室&lt;/p&gt;

&lt;h4&gt;问题描述&lt;/h4&gt;

&lt;p&gt;海康威视Web登录界面使用默认密码 &lt;/p&gt;

&lt;h4&gt;漏洞详情&lt;/h4&gt;

&lt;p&gt;之前发现的问题，扫到某个ip，发现开放80端口。打开发现是摄像头的Web登录界面，好高端啊。 
Google得到这个产品的默认密码，居然可以登录。后来发现乌云上也有人报过这个漏洞，由于主要原因是用户没有修改登录密码，因此被厂商忽略了。12个网络摄像头，好高端啊。至于哪个实验室的不太清楚。该实验室还有另外一个摄像头，这里就懒得截图了。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-04-02-security-in-bupt-03-01.png&quot; alt=&quot;2014-04-02-security-in-bupt-03-01.png&quot;&gt;&lt;/p&gt;

&lt;p&gt;PS. 类似默认密码的海康威视的设备可以通过神器&lt;a href=&quot;http://www.zoomeye.org/&quot;&gt;钟馗之眼&lt;/a&gt;找到更多。&lt;/p&gt;

&lt;h4&gt;原帖&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;http://bbs.byr.cn/#!article/WWWTechnology/24327&quot;&gt;http://bbs.byr.cn/#!article/WWWTechnology/24327&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 02 Apr 2014 00:00:00 +0800</pubDate>
        <link>/security/2014/04/02/security-in-bupt-03.html</link>
        <guid isPermaLink="true">/security/2014/04/02/security-in-bupt-03.html</guid>
        
        
        <category>security</category>
        
      </item>
    
      <item>
        <title>扒一扒北邮的安全问题[2]-如何查看女神照片</title>
        <description>&lt;h4&gt;漏洞类型：&lt;/h4&gt;

&lt;p&gt;SQL注入&lt;/p&gt;

&lt;h4&gt;相关网站&lt;/h4&gt;

&lt;p&gt;研究生信息数字化管理系统 &lt;/p&gt;

&lt;h4&gt;问题描述&lt;/h4&gt;

&lt;p&gt;SQL注入漏洞导致部分学生账号和信息泄漏 &lt;/p&gt;

&lt;h4&gt;漏洞详情&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;http://yjxt.bupt.edu.cn&quot;&gt;http://yjxt.bupt.edu.cn&lt;/a&gt;这个网站存在一个SQL注入漏洞。安全起见存在漏洞的地址就不贴出来了。同时欢迎有关老师私信索取地址，及时修复漏洞。接下来的事情很简单了，就是放到SQLmap里看看有什么有用的信息。表很多，没时间仔细找，暂时发现了部分学生学号和身份证号码等信息。这里就列出其中一个，并将学号、姓名、生日、身份证号打码。 &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-04-01-security-in-bupt-02-01.png&quot; alt=&quot;2014-04-01-security-in-bupt-02-01&quot;&gt;&lt;/p&gt;

&lt;p&gt;那么接下来，如果有的同学一直在使用默认密码，也就是生日八位数字，那么意味着可以登录这个同学的账号。已经毕业的学生账号已经锁定，所以影响的是在校生。如果刚好是11级的，那么你甚至可以在照片信息核对这里看到女神的照片，而且是读研前与读研后的对比哦。 &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-04-01-security-in-bupt-02-02.png&quot; alt=&quot;2014-04-01-security-in-bupt-02-02&quot;&gt;&lt;/p&gt;

&lt;p&gt;外包那边的开发人员找我帮忙调试，目前已经修复该漏洞。所以公布漏洞地址http://yjxt.bupt.edu.cn/Open/ExpertInfo.aspx?zjbh=2010810770&lt;/p&gt;

&lt;h4&gt;原帖&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;http://bbs.byr.cn/#!article/WWWTechnology/24215&quot;&gt;http://bbs.byr.cn/#!article/WWWTechnology/24215&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Tue, 01 Apr 2014 00:00:00 +0800</pubDate>
        <link>/security/2014/04/01/security-in-bupt-02.html</link>
        <guid isPermaLink="true">/security/2014/04/01/security-in-bupt-02.html</guid>
        
        
        <category>security</category>
        
      </item>
    
      <item>
        <title>扒一扒北邮的安全问题[1]-学生收费查询系统</title>
        <description>&lt;h4&gt;漏洞类型：&lt;/h4&gt;

&lt;p&gt;登录绕过/SQL注入&lt;/p&gt;

&lt;h4&gt;相关网站&lt;/h4&gt;

&lt;p&gt;财务处学生收费查询系统&lt;/p&gt;

&lt;h4&gt;问题描述&lt;/h4&gt;

&lt;p&gt;登录存在SQL注入漏洞导致学生姓名和交费信息泄漏&lt;/p&gt;

&lt;h4&gt;漏洞详情&lt;/h4&gt;

&lt;p&gt;&lt;code&gt;http://10.100.52.251/search/xssf/xssf.htm&lt;/code&gt;这个网站有三个模块，第一个学生个人收费查询暂时没有找到破解方法。 
第三个模块管理员入口，用户一栏填写经典的登录绕过&amp;#39;or&amp;#39;=&amp;#39;or&amp;#39;，成功绕过登陆。 &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-03-31-security-in-bupt-01-01.png&quot; alt=&quot;2014-03-31-security-in-bupt-01-01.png&quot;&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-03-31-security-in-bupt-01-02.png&quot; alt=&quot;2014-03-31-security-in-bupt-01-02.png&quot;&gt;&lt;/p&gt;

&lt;p&gt;看到了一大批账号，例如gl&lt;em&gt;gy。 
再来到第二个模块系部查询，用户一栏填写gl&lt;/em&gt;gy&amp;#39;or&amp;#39;，成功以公寓的账号登录系统，能够查询到学生交费信息。 &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-03-31-security-in-bupt-01-03.png&quot; alt=&quot;2014-03-31-security-in-bupt-01-03.png&quot;&gt;&lt;/p&gt;

&lt;p&gt;PS. lz是刚毕业的菜硕，非安全专业的，课余时间搞搞，发现好多有意思的事情分享给大家，同时也希望大家能够重视安全问题。 &lt;/p&gt;

&lt;h4&gt;原帖&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;http://bbs.byr.cn/#!article/WWWTechnology/24212&quot;&gt;http://bbs.byr.cn/#!article/WWWTechnology/24212&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 31 Mar 2014 00:00:00 +0800</pubDate>
        <link>/security/2014/03/31/security-in-bupt-01.html</link>
        <guid isPermaLink="true">/security/2014/03/31/security-in-bupt-01.html</guid>
        
        
        <category>security</category>
        
      </item>
    
      <item>
        <title>JavaEE项目切换到Intellij遇到的一个问题</title>
        <description>&lt;p&gt;换电脑真是一个麻烦的事情，尤其是像我这样需要各种环境的人。第一天折腾xcode，弄好证书什么的，把之前的一个项目跑起来。今天是折腾的第二天，只完成了一件事情，就是在mac上用Intellij Idea把之前一个项目跑起来。真心受不了MyEclipse了，慢就算了，把项目导入遇到问题，结果啥也没导入进来，根本不给修改配置解决问题的机会。&lt;/p&gt;

&lt;p&gt;问题是这样的，用Intellij新建项目，把之前的代码资源拷贝过来，运行没有问题。修改了一点代码，部署的时候代码始终没有更新。项目输出目录下，production下是更新了的，artifacts下是没更新的。重新编译、换web容器都没有用。最后发现是拷贝过来的WEB-INF目录中已经编译好的classes的问题。Eclipse是将编译好的class文件放在这个目录，Intellij编译好的并不放在这里，不知道哪一步就导致这里的classes文件复制到输出目录，并导致新编译的class文件被覆盖。&lt;/p&gt;

&lt;p&gt;解决方法就是把web目录下的classes目录删除掉。&lt;/p&gt;
</description>
        <pubDate>Tue, 25 Feb 2014 00:00:00 +0800</pubDate>
        <link>/past/2014/02/25/javaee-to-intellij.html</link>
        <guid isPermaLink="true">/past/2014/02/25/javaee-to-intellij.html</guid>
        
        
        <category>past</category>
        
      </item>
    
      <item>
        <title>Geoguessr游戏破解</title>
        <description>&lt;p&gt;&lt;a href=&quot;http://geoguessr.com/&quot;&gt;Geoguessr&lt;/a&gt;是一个好玩的根据街景猜位置的游戏。建议先玩玩，充分体会游戏的乐趣。学会了破解的方法就没意思了。接下来进入破解方法。需要Chrome浏览器和Web调试的一点知识。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-02-11-hack-geoguessr.jpg&quot; alt=&quot;geoguessr&quot;&gt;&lt;/p&gt;

&lt;h4&gt;1. 捕捉街景的网络交互。&lt;/h4&gt;

&lt;p&gt;按F12打开调试工具。刷新网站，加载完成后在network选项卡下凭借缩略图能够很快找到街景的网络请求。我这里找到的是&lt;code&gt;https://cbks0.googleapis.com/cbk?output=tile&amp;amp;cb_client=apiv3&amp;amp;v=4&amp;amp;zoom=4&amp;amp;x=4&amp;amp;y=3&amp;amp;panoid=GUkoc-YOhxYusUlRmRiuvw&amp;amp;fover=2&amp;amp;onerr=3&lt;/code&gt;。其中的参数panoid让我想起了单词panorama，这个就是街景的id。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-02-11-hack-geoguessr2.png&quot; alt=&quot;geoguessr&quot;&gt;&lt;/p&gt;

&lt;h4&gt;2. 街景id转成经纬度。&lt;/h4&gt;

&lt;p&gt;Google街景的地址的格式是&lt;code&gt;http://maps.google.com/?hl=en&amp;amp;ie=UTF8&amp;amp;ll=42.843751,-68.203125&amp;amp;spn=0,313.461914&amp;amp;z=5&amp;amp;layer=c&amp;amp;cbll=41.916553,-75.883875&amp;amp;panoid=zRjnm1iOEUZN_ueQbq6MlQ&amp;amp;cbp=12,278.28,,0,6.02&lt;/code&gt;，把这里的panoid换成刚才得到的街景id。我使用的是新版Google Maps，地址格式是&lt;code&gt;https://www.google.com/maps/preview/@47.528448,-92.168024,3a,75y,294.09h,71.36t/data=!3m4!1e1!3m2!1sGUkoc-YOhxYusUlRmRiuvw!2e0?hl=en&lt;/code&gt;，街景id是!1s与!2e之间的部分。打开替换街景id后的链接，就能在地址中找到经纬度47.528448,-92.168024。&lt;/p&gt;

&lt;h4&gt;3. 控制地图中心。&lt;/h4&gt;

&lt;p&gt;这是可以收到能够拖动地图中心到找到的经纬度。也可以用代码注入的方法控制地图拖动缩放。Google Maps API新建地图的语句是new google.maps.Map。搜索代码功能以前是在调试工具的Resources选项卡下，现在变成了按Esc调出drawer，选中search选项卡搜索。搜到了三处，都在geoguessr.js中。从名字来看，guessMapView这个变量最可能是猜结果的地图。在控制台的变量中找不到这个实例，应该是包在函数中了，就通过断点注入来插入代码。在sources选项卡中找到这个变量定义的地方，可以点击尖括号图标来让Chrome帮你完成代码格式化方便阅读。找一个能访问资源的功能，例如showHelp定义的地方打断点。点击界面的帮助按钮，就会停在断点处。之前记得先在猜的地图上把红色的标记点出来。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2014-02-11-hack-geoguessr3.png&quot; alt=&quot;geoguessr&quot;&gt;&lt;/p&gt;

&lt;p&gt;控制台输入代码：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;google&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;maps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;LatLng&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;47.528448&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;92.168024&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;guessMapView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setCenter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;guessMapView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;guessMarker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setPosition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;继续执行脚本。回到页面点Make Guess就通关了，得到用于炫耀的链接哈哈。&lt;code&gt;http://url.geoguessr.com/6nYg&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;不得不说猜到中国的时候坑比较大啊，因为众所周知的国内地图被要求加一个偏差。其中有一关街景是在湖边的路上，答案要点在湖里面。&lt;/p&gt;
</description>
        <pubDate>Tue, 11 Feb 2014 00:00:00 +0800</pubDate>
        <link>/past/2014/02/11/hack-geoguessr.html</link>
        <guid isPermaLink="true">/past/2014/02/11/hack-geoguessr.html</guid>
        
        
        <category>past</category>
        
      </item>
    
  </channel>
</rss>
