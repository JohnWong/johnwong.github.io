<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Code Jam 2010 Round 1A Problem B</title>
  <meta name="description" content=""> 
  
  <script src="/js/jquery.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/bootstrap-theme.min.css ">
  
  <script src="/js/common.js"></script>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/pygments.css">
  <link rel="stylesheet" href="/css/github-markdown.css">
  <link rel="canonical" href="/past/2013/09/18/code-jam-2010-round-1a-problem-b.html">
</head>

  <body>

    <header class="navbar navbar-responsive-top jw-docs-nav" id="top" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".jw-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">
        <img class="gravatar" src="http://gravatar.duoshuo.com/avatar/135dee388c0976f500748a64960038ee?s=88">
        <span class="name">John Wong</span>
      </a>
    </div>
    <nav class="collapse navbar-collapse jw-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        
        <li class="">
          <a href="/category/mobile.html">mobile</a>
        </li>
        
        <li class="">
          <a href="/category/security.html">security</a>
        </li>
        
        <li class="active">
          <a href="/category/past.html">past</a>
        </li>
        
        <li>
          <a href="#">Bookmarks</a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/about.html" target="_blank">About</a>
        </li>
      </ul>
    </nav>
  </div>
</header>
    
    <div class="page-content">
      <div class="wrapper">
        
  

  

  
    
  

<div class="container post-middle">
  <div class="row">
    <div class="col-md-9" role="main">
      <div class="post">
        <div class="post-poster">
          <img class="feature-img" src="">
        </div>
        <h1 class="post-big-title">
          Code Jam 2010 Round 1A Problem B
        </h1>
        <div class="post-author">
          <a class="category" href="category.html?cat=Life"><span class="glyphicon glyphicon-time"></span>past</a> | <span id="author" class="author"></span> • Sep 18, 2013
        </div>
        <div class="markdown-body">
          <h3>Problem B. Make it Smooth</h3>

<h4>Problem</h4>

<p>You have a one-dimensional array of N pixels. Each pixel has a value, represented by a number between 0 and 255, inclusive. The distance between two pixels is the absolute difference of their numbers.
You can perform each of the following operations zero or more times:
With cost D, delete any pixel, so its original neighbors become neighboring pixels.
With cost I, insert one pixel of any value into any position -- either between two existing pixels, or before the first pixel, or after the last pixel.
You can change the value of any pixel. The cost is the absolute difference of the old value of the pixel and the new value of the pixel.
The array is smooth if any neighboring pixels have distance at most M. Find the minimum possible cost of a sequence of operations that makes the array smooth.</p>

<p>Note: The empty array -- the array containing no pixels -- is considered to be smooth.</p>

<h4>Input</h4>

<p>The first line of the input gives the number of test cases, T. T test cases follow, each with two lines. The first line is in the form &quot;D I M N&quot;, the next line contains N numbers ai: the values of the pixels from left to the right.</p>

<h4>Output</h4>

<p>For each test case, output one line containing &quot;Case #x: y&quot;, where x is the case number (starting from 1), and y is the minimum cost to make the input array smooth.</p>

<h4>Limits</h4>

<p>All the numbers in the input are integers.
1 ≤ T ≤ 100
0 ≤ D, I, M, ai ≤ 255
Small dataset
1 ≤ N ≤ 3.</p>

<h4>Large dataset</h4>

<p>1 ≤ N ≤ 100.</p>

<h4>Sample</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">Input 

2
6 6 2 3
1 7 5
100 1 5 3
1 50 7

Output 

Case #1: 4
Case #2: 17
</code></pre></div>
<h4>Explanation</h4>

<p>In Case #1, decreasing the 7 to 3 costs 4 and is the cheapest solution. In Case #2, deleting is extremely expensive; it&#39;s cheaper to insert elements so your final array looks like [1, 6, 11, 16, 21, 26, 31, 36, 41, 46, 50, 45, 40, 35, 30, 25, 20, 15, 10, 7].</p>

<p>解题思路：</p>

<p>最近遇到的一些动态规划问题中感觉最难的一个，思考明白后让我对动态规划的理解更深刻了。思路是这个数组中的每个数字在最小代价时，不确定大小，但是在0-255范围内把每种不同组合的情况都考虑到，找出其中最小的代价。在找的过程中，可以先找数组前1个的最小代价，然后利用前1个的结论找前2个的最小代价，也就是用动态规划的思想递归求解。在定义数组a[N]，存放输入的N个记录。定义dp[N+1][256]，例如dp[i+1][j]的意义是，a的子数组a[0:i]中最后一个像素变为j时的最小代价。可能的情况有：</p>

<ol>
<li><p>删除a[i+1]，那么cost=dp[i][j] + D，即a[i]变为j的代价加上删除a[i+1]代价。 </p></li>
<li><p>修改a[i+1]变为j，那么需要考虑a[i]不同情况，我们使用辅助变量k表示a[i]的不同情况，0&lt;=k&lt;=255。cost=dp[i][k]+insert<em>cost+move</em>cost，其中move<em>cost指的是将a[i+1]修改为j的代价，insert</em>cost指的是将k到j之间通过插入使之平滑的代价。</p></li>
</ol>

<p>求出删除a[i+1]与k取不同值时修改a[i+1]的代价的最小值，即为a[i+1][j]的值。接下来只需要找出dp[N][0:255]中的最小值，即为答案。</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">C</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
    <span class="kt">double</span> <span class="n">ratio</span> <span class="o">=</span> <span class="o">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">sqrt</span><span class="o">(</span><span class="mi">5</span><span class="o">))</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">C</span><span class="o">;</span> <span class="n">c</span><span class="o">++)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">a1</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">a2</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">b1</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">b2</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
        <span class="kt">long</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">a1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">a2</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="kt">double</span> <span class="n">up</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">ratio</span><span class="o">;</span>
            <span class="kt">double</span> <span class="n">down</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="n">ratio</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">b1</span> <span class="o">&gt;=</span> <span class="n">up</span> <span class="o">||</span> <span class="n">b2</span> <span class="o">&lt;=</span> <span class="n">down</span><span class="o">)</span>
                <span class="n">count</span> <span class="o">+=</span> <span class="n">b2</span> <span class="o">-</span> <span class="n">b1</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
            <span class="k">else</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">b1</span> <span class="o">&lt;=</span> <span class="n">down</span><span class="o">)</span>
                    <span class="n">count</span> <span class="o">+=</span> <span class="n">max</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">floor</span><span class="o">(</span><span class="n">down</span><span class="o">)</span> <span class="o">-</span> <span class="n">b1</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">b2</span> <span class="o">&gt;=</span> <span class="n">up</span><span class="o">)</span>
                    <span class="n">count</span> <span class="o">+=</span> <span class="n">max</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">b2</span> <span class="o">-</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">ceil</span><span class="o">(</span><span class="n">up</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Case #%d: %d&quot;</span><span class="o">,</span> <span class="n">c</span><span class="o">,</span> <span class="n">count</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
        </div>
        
        <div id="disqus_head" class="disqus_head">
  <h2>Comments</h2>
</div>
<div id="disqus_thread" class="disqus_thread"></div>
<script type="text/javascript" async=true src="//johnwong.disqus.com/embed.js"></script>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

      </div>
    </div>
    <div class="col-md-3 index-right">

      <img class="gravatar index-gravatar" src="http://gravatar.duoshuo.com/avatar/135dee388c0976f500748a64960038ee?s=240">
<h1 class="index-me">
  <span>John Wong <a href="https://github.com/JohnWong">@Github</a></span>
</h1>
<div class="vcard-stats">
  <a class="vcard-stat" href="https://github.com/JohnWong/followers">
    <strong class="vcard-stat-count">20</strong> followers
  </a>
  <a class="vcard-stat" href="https://github.com/stars/JohnWong">
    <strong class="vcard-stat-count">43</strong> Starred
  </a>
  <a class="vcard-stat" href="https://github.com/JohnWong/following">
    <strong class="vcard-stat-count">10</strong> Following
  </a>
  <div class="cf"></div>
</div>

    </div>
  </div>
</div>
      </div>
    </div>
    
    <footer class="jw-docs-footer" role="contentinfo">
  <div class="container">
    <div class="jw-docs-social">
      <ul class="jw-docs-social-buttons">
        <li class="github-btn">
          <iframe class="github-btn" src="http://ghbtns.com/github-btn.html?user=JohnWong&type=follow&count=true&size=small" width="165" height="20" title="Follow on GitHub"></iframe>
        </li>
        <li class="github-btn">
          <iframe class="github-btn" src="http://pytool.sinaapp.com/wb-btn?user=2180280355&type=follow&count=true&size=small&encoding=utf-8" width="160" height="20" title="Follow on Weibo"></iframe>
        </li>
        <!-- 解决linkedin抓数据500错误前关闭按钮
                    <li class="github-btn">
                        <iframe class="github-btn" src="http://pytool.sinaapp.com/in-btn?user=xiaozhe-huang/4b/204/71b&count=true&size=small&encoding=utf-8" width="202" height="20" title="Follow on Weibo"></iframe>
                    </li>
                -->
      </ul>
    </div>
    <p>自豪地采用自己做的博客系统
      <br class="footer-desc-endline">with the help of <a href="http://getbootstrap.com/">Twitter Bootstrap</a> & <a href="https://github.com/jekyll/jekyll">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>
      <p>
        <ul class="jw-docs-footer-links muted">
          <li>© 2014 • <a href="https://github.com/JohnWong">John Wong</a> <span class="rss-subscribe"> | subscribe <a href="/feed.xml">via RSS</a></span>
          </li>
        </ul>
  </div>
  <div style="display:none">
    <div style="display: none !important"
<span id='cnzz_stat_icon_1252918306'></span>
<script src=' http://s23.cnzz.com/z_stat.php?id=1252918306' type='text/javascript'></script>
    <script>
(function(i, s, o, g, r, a, m) {
  i['GoogleAnalyticsObject'] = r;
  i[r] = i[r] || function() {
    (i[r].q = i[r].q || []).push(arguments)
  }, i[r].l = 1 * new Date();
  a = s.createElement(o),
    m = s.getElementsByTagName(o)[0];
  a.async = 1;
  a.src = g;
  m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

ga('create', 'UA-53121297-1', 'auto');
ga('send', 'pageview');
</script>
  </div>
</footer>

  </body>

</html>
