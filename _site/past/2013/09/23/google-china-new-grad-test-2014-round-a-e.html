<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Google China New Grad Test 2014 Round A Problem E</title>
  <meta name="description" content=""> 
  
  <script src="//libs.baidu.com/jquery/1.7.2/jquery.min.js"></script>
  <script src="//libs.baidu.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="//libs.baidu.com/bootstrap/3.0.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="//libs.baidu.com/bootstrap/3.0.3/css/bootstrap-theme.min.css">
  
  <script src="/js/common.js"></script>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/pygments.css">
  <link rel="stylesheet" href="/css/github-markdown.css">
  <link rel="canonical" href="/past/2013/09/23/google-china-new-grad-test-2014-round-a-e.html">
</head>

  <body>

    <header class="navbar navbar-responsive-top jw-docs-nav" id="top" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".jw-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">
        <img class="gravatar" alt="John Wong" src="http://gravatar.duoshuo.com/avatar/135dee388c0976f500748a64960038ee?s=88">
        <span class="name">John Wong</span>
      </a>
    </div>
    <nav class="collapse navbar-collapse jw-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        
        <li class="">
          <a href="/category/mobile.html">mobile</a>
        </li>
        
        <li class="">
          <a href="/category/security.html">security</a>
        </li>
        
        <li class="">
          <a href="/category/showcase.html">showcase</a>
        </li>
        
        <li class="active">
          <a href="/category/past.html">past</a>
        </li>
        
        <!-- <li>
          <a href="#">Bookmarks</a>
        </li> -->
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/about.html" target="_blank">About</a>
        </li>
      </ul>
    </nav>
  </div>
</header>
    
    <div class="page-content">
      <div class="wrapper">
        
  

  

  

  
    
  

<div class="container post-middle">
  <div class="row">
    <div class="col-md-9" role="main">
      <div class="post">
        <div class="post-poster">
          <img class="feature-img" src="">
        </div>
        <h1 class="post-big-title">
          Google China New Grad Test 2014 Round A Problem E
        </h1>
        <div class="post-author">
          <a class="category" href="category.html?cat=Life"><span class="glyphicon glyphicon-time"></span>past</a> | <span id="author" class="author"></span> • Sep 23, 2013
        </div>
        <div class="markdown-body">
          <h3>Problem E. Spaceship Defence</h3>

<h3>Problem</h3>

<p>The enemy has invaded your spaceship, and only superior tactics will allow you to defend it! To travel around your spaceship, your soldiers will use two devices: teleporters andturbolifts.</p>

<p>Teleporters allow your soldiers to move instantly between rooms. Every room contains a teleporter, and rooms are color-coded: if a soldier is in a room with some color, she can use the teleporter in that room to immediately move to any other room with the same color.</p>

<p>Turbolifts allow your soldiers to move between rooms more slowly. A turbolift is like an elevator that moves in many directions. Each turbolift moves from one room to one other room, and it takes a certain amount of time to travel. Notes about turbolifts:</p>

<p>Turbolifts are not two-way: if a turbolift moves soldiers from room a to room b, the same turbolift cannot move soldiers from room b to room a, although there might be another turbolift that does that.
More than one soldier can use the same turbolift, and they do not interfere with each other in any way.
You will be given the locations and destinations of several soldiers. For each soldier, output the minimum amount of time it could take that soldier to travel from his location to his destination.</p>

<h3>Input</h3>

<p>The first line of the input gives the number of test cases, T. T test cases follow.</p>

<p>For every test case:</p>

<p>The first line of every test case contains an integer N, which is the number of rooms in your spaceship. The rooms are numbered from 1 to N. The following N lines each contain a string telling the color of the rooms, from room 1 to room N. The strings only contain characters a-z (the lower-case English letters) and 0-9 (the number 0 to 9), and the length of each string will be less than or equal to 2.</p>

<p>The next line in the test case is an integer M, which indicates the number of turbolifts in your spaceship. The following M lines each contain 3 space-separated integers ai, bi, ti, telling us that there is a turbolift that can transport soldiers from room ai to room bi in tiseconds.</p>

<p>The next line in the test case contains an integer S, which is the number of soldiers at your command. The following S lines each contain two integers: the location and destination of one soldier, pj and qj.</p>

<h3>Output</h3>

<p>For each test case, output one line containing only the string &quot;Case #x:&quot;, where x is the number of the test case (starting from 1). On the next S lines, output a single integer: on line j, the smallest number of seconds it could take for a soldier to travel from pj to qj. If there is no path from pj to qj, the integer you output should be -1.</p>

<h3>Limits</h3>

<p>1 ≤ S ≤ 100.
1 ≤ ai, bi ≤ N.
0 ≤ ti ≤ 1000.
1 ≤ pj, qj ≤ N.</p>

<h3>Small dataset</h3>

<p>1 ≤ T ≤ 10.
1 ≤ N ≤ 1000.
0 ≤ M ≤ 3000.</p>

<h3>Large dataset</h3>

<p>T = 1.
1 ≤ N ≤ 80000.
0 ≤ M ≤ 3000.</p>

<h3>Sample</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">Input 

3
3
gl
t3
t3
3
1 2 217
3 2 567
1 1 21
2
2 1
2 3
4
ca
bl
bl
8z
0
3
1 2
2 3
1 1
8
re
b7
ye
gr
0l
0l
ye
b7
7
4 1 19
2 4 21
2 5 317
4 5 34
4 7 3
4 8 265
8 6 71
3
4 3
2 6
1 4

Output 

Case #1:
-1
0
Case #2:
-1
0
0
Case #3:
3
55
-1
</code></pre></div>
<p>解题思路：被题目绕得云里雾里，其实是一个图的最短路径问题。根据输入信息构造好图之后，用Dijikstra算法求最短路径即可。暂时没通过，还没找到问题所在。明天面阿里，希望能在跌倒的地方爬起来。先暂时搁置准备面试。</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>  
    <span class="kt">int</span> <span class="n">tests</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>  
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">test</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">test</span> <span class="o">&lt;=</span> <span class="n">tests</span><span class="o">;</span> <span class="n">test</span><span class="o">++)</span> <span class="o">{</span>  
        <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextInt</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>  
        <span class="n">debug</span><span class="o">(</span><span class="n">N</span><span class="o">);</span>  
        <span class="n">String</span><span class="o">[]</span> <span class="n">rooms</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[</span><span class="n">N</span><span class="o">];</span>  
        <span class="kt">int</span><span class="o">[][]</span> <span class="n">graph</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">N</span><span class="o">][</span><span class="n">N</span><span class="o">];</span>  
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">z</span> <span class="o">:</span> <span class="n">graph</span><span class="o">)</span>  
            <span class="n">Arrays</span><span class="o">.</span><span class="na">fill</span><span class="o">(</span><span class="n">z</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span>  

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>  
            <span class="n">graph</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>  

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>  
            <span class="n">rooms</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>  
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span>  
                <span class="k">if</span> <span class="o">(</span><span class="n">rooms</span><span class="o">[</span><span class="n">j</span><span class="o">].</span><span class="na">equals</span><span class="o">(</span><span class="n">rooms</span><span class="o">[</span><span class="n">i</span><span class="o">]))</span>  
                    <span class="n">graph</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">graph</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>  
        <span class="o">}</span>  
        <span class="n">debug</span><span class="o">(</span><span class="n">rooms</span><span class="o">);</span>  
        <span class="kt">int</span> <span class="n">M</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>  
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">M</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>  
            <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>  
            <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>  
            <span class="kt">int</span> <span class="n">t</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>  
            <span class="n">debug</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">t</span><span class="o">);</span>  
            <span class="n">graph</span><span class="o">[</span><span class="n">a</span><span class="o">][</span><span class="n">b</span><span class="o">]</span> <span class="o">=</span> <span class="n">graph</span><span class="o">[</span><span class="n">a</span><span class="o">][</span><span class="n">b</span><span class="o">]</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">?</span> <span class="n">min</span><span class="o">(</span><span class="n">graph</span><span class="o">[</span><span class="n">a</span><span class="o">][</span><span class="n">b</span><span class="o">],</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">t</span><span class="o">;</span>  
        <span class="o">}</span>  
        <span class="kt">int</span> <span class="n">S</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>  

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Case #%d:&quot;</span><span class="o">,</span> <span class="n">test</span><span class="o">));</span>  
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">S</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>  
            <span class="kt">int</span> <span class="n">p</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>  
            <span class="kt">int</span> <span class="n">q</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>  
            <span class="n">debug</span><span class="o">(</span><span class="n">S</span><span class="o">,</span> <span class="n">p</span><span class="o">,</span> <span class="n">q</span><span class="o">);</span>  
            <span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="n">dijkstra</span><span class="o">(</span><span class="n">graph</span><span class="o">,</span> <span class="n">p</span><span class="o">,</span> <span class="n">q</span><span class="o">);</span>  
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">res</span><span class="o">);</span>  
        <span class="o">}</span>  
    <span class="o">}</span>  
<span class="o">}</span>  

<span class="kt">int</span> <span class="nf">dijkstra</span><span class="o">(</span><span class="kt">int</span><span class="o">[][]</span> <span class="n">graph</span><span class="o">,</span> <span class="kt">int</span> <span class="n">p</span><span class="o">,</span> <span class="kt">int</span> <span class="n">q</span><span class="o">)</span> <span class="o">{</span>  
    <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">find</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;();</span>  
    <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">notFind</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;();</span>  
    <span class="n">find</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>  
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">graph</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>  
        <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">!=</span> <span class="n">p</span><span class="o">)</span>  
            <span class="n">notFind</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>  
    <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>  
        <span class="kt">int</span> <span class="n">s</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">e</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>  
        <span class="k">for</span> <span class="o">(</span><span class="n">Integer</span> <span class="n">i</span> <span class="o">:</span> <span class="n">find</span><span class="o">)</span>  
            <span class="k">for</span> <span class="o">(</span><span class="n">Integer</span> <span class="n">j</span> <span class="o">:</span> <span class="n">notFind</span><span class="o">)</span>  
                <span class="k">if</span> <span class="o">(</span><span class="n">graph</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="o">)</span>  
                    <span class="k">if</span> <span class="o">(</span><span class="n">s</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">graph</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">&lt;</span> <span class="n">graph</span><span class="o">[</span><span class="n">s</span><span class="o">][</span><span class="n">e</span><span class="o">])</span> <span class="o">{</span>  
                        <span class="n">s</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>  
                        <span class="n">e</span> <span class="o">=</span> <span class="n">j</span><span class="o">;</span>  
                    <span class="o">}</span>  
        <span class="k">if</span><span class="o">(</span><span class="n">s</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>  
            <span class="k">break</span><span class="o">;</span>  
        <span class="k">if</span><span class="o">(</span><span class="n">graph</span><span class="o">[</span><span class="n">p</span><span class="o">][</span><span class="n">e</span><span class="o">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>  
            <span class="n">graph</span><span class="o">[</span><span class="n">p</span><span class="o">][</span><span class="n">e</span><span class="o">]</span> <span class="o">=</span> <span class="n">graph</span><span class="o">[</span><span class="n">p</span><span class="o">][</span><span class="n">s</span><span class="o">]</span> <span class="o">+</span> <span class="n">graph</span><span class="o">[</span><span class="n">s</span><span class="o">][</span><span class="n">e</span><span class="o">];</span>  
        <span class="k">else</span>  
            <span class="n">graph</span><span class="o">[</span><span class="n">p</span><span class="o">][</span><span class="n">e</span><span class="o">]</span> <span class="o">=</span> <span class="n">min</span><span class="o">(</span><span class="n">graph</span><span class="o">[</span><span class="n">p</span><span class="o">][</span><span class="n">e</span><span class="o">],</span> <span class="n">graph</span><span class="o">[</span><span class="n">p</span><span class="o">][</span><span class="n">s</span><span class="o">]</span> <span class="o">+</span> <span class="n">graph</span><span class="o">[</span><span class="n">s</span><span class="o">][</span><span class="n">e</span><span class="o">]);</span>  
        <span class="n">notFind</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>  
        <span class="n">find</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>  
        <span class="k">if</span><span class="o">(</span><span class="n">e</span><span class="o">==</span><span class="n">q</span><span class="o">)</span>  
            <span class="k">break</span><span class="o">;</span>  
    <span class="o">}</span>  
    <span class="k">return</span> <span class="n">graph</span><span class="o">[</span><span class="n">p</span><span class="o">][</span><span class="n">q</span><span class="o">];</span>  
<span class="o">}</span>  
</code></pre></div>
        </div>
        
        <div id="disqus_head" class="disqus_head">
  <h2>Comments</h2>
</div>
<div id="disqus_thread" class="disqus_thread"></div>
<script type="text/javascript" async=true src="//johnwong.disqus.com/embed.js"></script>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

      </div>
    </div>
    <div class="col-md-3 index-right">

      <img class="gravatar index-gravatar" alt="John Wong" src="http://gravatar.duoshuo.com/avatar/135dee388c0976f500748a64960038ee?s=240">
<h1 class="index-me">
  <span>John Wong <a href="https://github.com/JohnWong">@Github</a></span>
</h1>
<div class="vcard-stats">
  <a class="vcard-stat" href="https://github.com/JohnWong/followers">
    <strong class="vcard-stat-count">20</strong> followers
  </a>
  <a class="vcard-stat" href="https://github.com/stars/JohnWong">
    <strong class="vcard-stat-count">43</strong> Starred
  </a>
  <a class="vcard-stat" href="https://github.com/JohnWong/following">
    <strong class="vcard-stat-count">10</strong> Following
  </a>
  <div class="cf"></div>
</div>

    </div>
  </div>
</div>
      </div>
    </div>
    
    <footer class="jw-docs-footer" role="contentinfo">
  <div class="container">
    <div class="jw-docs-social">
      <ul class="jw-docs-social-buttons">
        <li class="github-btn">
          <iframe class="github-btn" src="http://ghbtns.com/github-btn.html?user=JohnWong&type=follow&count=true&size=small" width="165" height="20" title="Follow on GitHub"></iframe>
        </li>
        <li class="github-btn">
          <iframe class="github-btn" src="http://pytool.sinaapp.com/wb-btn?user=2180280355&type=follow&count=true&size=small&encoding=utf-8" width="160" height="20" title="Follow on Weibo"></iframe>
        </li>
        <!-- 解决linkedin抓数据500错误前关闭按钮
                    <li class="github-btn">
                        <iframe class="github-btn" src="http://pytool.sinaapp.com/in-btn?user=xiaozhe-huang/4b/204/71b&count=true&size=small&encoding=utf-8" width="202" height="20" title="Follow on Weibo"></iframe>
                    </li>
                -->
      </ul>
    </div>
    <p>自豪地采用自己做的博客系统
      <br class="footer-desc-endline">with the help of <a href="http://getbootstrap.com/">Twitter Bootstrap</a> & <a href="https://github.com/jekyll/jekyll">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>
      <p>
        <ul class="jw-docs-footer-links muted">
          <li>© 2014 • <a href="https://github.com/JohnWong">John Wong</a> <span class="rss-subscribe"> | subscribe <a href="/feed.xml">via RSS</a></span>
          </li>
        </ul>
  </div>
  <div style="display:none">
    <div style="display: none !important"
<span id='cnzz_stat_icon_1252918306'></span>
<script src='http://s23.cnzz.com/z_stat.php?id=1252918306' type='text/javascript'></script>
    <script>
(function(i, s, o, g, r, a, m) {
  i['GoogleAnalyticsObject'] = r;
  i[r] = i[r] || function() {
    (i[r].q = i[r].q || []).push(arguments)
  }, i[r].l = 1 * new Date();
  a = s.createElement(o),
    m = s.getElementsByTagName(o)[0];
  a.async = 1;
  a.src = g;
  m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

ga('create', 'UA-53121297-1', 'auto');
ga('send', 'pageview');
</script>
  </div>
</footer>

  </body>

</html>
